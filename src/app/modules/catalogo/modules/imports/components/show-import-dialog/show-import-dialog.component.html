<h1 matDialogTitle>Detalles</h1>

<mat-dialog-content>
    <div *ngIf="import" class="row font-weight-bold">
      <div class="col-md-6 border-right">
        <div class="sticky-top">
          <div class="font-weight-bold">
            <h2 class="font-4xl font-weight-bold">Importación</h2>
          </div>
          <div>
            <div>
              <tbody class="table table-borderless">
                <tr>
                  <td>Código</td>
                  <td class="text-info">{{import.code}}</td>
                </tr>
                <tr>
                  <td>Fecha estimada inicial</td>
                  <td>{{import.estimated_date_first|date:'medium'}}</td>
                </tr>
                <tr>
                  <td>Fecha estimada final</td>
                  <td>{{import.estimated_date_last|date:'medium'}}</td>
                </tr>
                <tr>
                  <td>Fecha de creación</td>
                  <td>{{import.created_at|date:'medium'}}</td>
                </tr>
                <tr>
                  <td>Fecha de arribo</td>
                  <td>{{import.arrival_date|date:'medium'}}</td>
                </tr>
                <tr>
                  <td>Identificador</td>
                  <td>#{{import.id}}</td>
                </tr>
              </tbody>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="font-weight-bold main-style sticky-top">
          <h2 class="font-4xl font-weight-bold">Productos</h2>
        </div>
        <div *ngFor="let productAndPrice of products">
          <h3 style="top: 34px;" class="d-flex align-items-center font-xs sticky-top main-style"><img class="img-product mr-2 shadow-sm" *ngIf="productAndPrice.product.image" [src]="productAndPrice.product.image" alt="">{{productAndPrice.product.name}}</h3>
          <div>
            <tbody class="table table-borderless">
              <tr>
                <td>Codigo</td>
                <td>{{productAndPrice.product.code}}</td>
              </tr>
              <tr>
                <td>Disponibles</td>
                <td>{{productAndPrice.product.available}}</td>
              </tr>
            </tbody>
          </div>
          <div>
            <h4 class="font-xs ">ÚLTIMOS PRECIOS</h4>
            <div>
              <tbody class="table table-borderless">
                <div class="rounded-lg mb-2 shadow" *ngFor="let last_price of productAndPrice.product.last_prices">
                  <tr>
                    <td>Estado</td>
                    <td [ngClass]="last_price.status === 'active' ? 'text-primary': 'text-danger'">{{last_price.status}}</td>
                  </tr>
                  <tr>
                    <td>Precio</td>
                    <td>{{last_price.price}}</td>
                  </tr>
                  <tr>
                    <td>Tipo de duración</td>
                    <td>{{last_price.duration_type | translatefz}}</td>
                  </tr>
                  <ng-container *ngIf="last_price.duration_type === 'date_range'">
                    <tr>
                      <td>Fecha Inicial</td>
                      <td>{{last_price.start_date | date: 'medium'}}</td>
                    </tr>
                    <tr>
                      <td>Fecha Final</td>
                      <td>{{last_price.end_date | date: 'medium'}}</td>
                    </tr>
                    <tr>
                      <td class="" colspan="2">Grupo</td>
                    </tr>
                    <tr>
                      <td>Nombre</td>
                      <td>{{last_price.group.name}}</td>
                    </tr>
                  </ng-container>
                </div>
              </tbody>
          </div>
        </div>
        <hr>
      </div>
      </div>
    </div>
    <div *ngIf="isLoading">
      <mat-progress-bar mode="buffer"></mat-progress-bar>
    </div>
</mat-dialog-content>

<mat-dialog-actions>
    <button color="warn" mat-button matDialogClose>Cerrar <i class="fa-solid fa-xmark"></i></button>
    <!-- <button mat-button>Action</button> -->
    
</mat-dialog-actions>