<div class="mt-4">
  <h2 class="font-5xl d-flex align-items-center">
    <button  mat-icon-button (click)="goBack()">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    &nbsp;{{ title }}
  </h2>

  <!-- <mat-horizontal-stepper linear #stepper> -->
    <!-- <mat-step [completed]="isCompletedFormPerson" [editable]="false"> -->
      <form [formGroup]="form_person" class="rounded-fz border-0 card-body">
        <ng-template matStepLabel>Formulario de persona</ng-template>
        <div class="row">
          <mat-form-field class="col-md-6">
            <mat-label>Nombres</mat-label>
            <input matInput formControlName="first_name" type="text" required />
            <mat-error *ngIf="form_person.controls['first_name'].invalid">Nombres Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Apellidos</mat-label>
            <input matInput formControlName="last_name" type="text" required />
            <mat-error *ngIf="form_person.controls['last_name'].invalid">Apellidos Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Tipo de identificación</mat-label>
            <mat-select formControlName="identification_type" required>
              <mat-option *ngFor="let idType of idTypes | keyvalue" [value]="idType.key">
                {{ idType.value }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form_person.controls['identification_type'].invalid">
              Tipo de identificación Requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Número de identificación</mat-label>
            <input matInput formControlName="identification_number" type="text" required />
            <mat-error *ngIf="form_person.controls['identification_number'].invalid">
              Número de identificación Requerido
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>
              Fecha de nacimiento
              <small>(d/m/yyyy)</small>
            </mat-label>
            <input matInput [max]="maxDateBirthDay" formControlName="birthday" [matDatepicker]="dp4" />
            <mat-datepicker-toggle matSuffix [for]="dp4"></mat-datepicker-toggle>
            <mat-datepicker #dp4 disabled="false"></mat-datepicker>
            <mat-error *ngIf="form_person.controls['birthday'].invalid">Fecha de nacimiento Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Sexo</mat-label>
            <mat-select formControlName="sex" required>
              <mat-option *ngFor="let sex of sexes | keyvalue" [value]="sex.key">
                {{ sex.value }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form_person.controls['sex'].invalid">Sexo Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>
              Fecha de inicio laboral
              <small>(d/m/yyy)</small>
            </mat-label>
            <input [max]="maxDate" matInput formControlName="start_date" [matDatepicker]="dp3" />
            <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
            <mat-datepicker #dp3 disabled="false"></mat-datepicker>
            <mat-error *ngIf="form_person.controls['start_date'].invalid">Fecha de inicio laboral Requerido</mat-error>
          </mat-form-field>

          <div class="col-12 font-2xl mt-2 mb-4">Información</div>

          <mat-form-field class="col-md-6">
            <mat-label>Seleccione una ciudad</mat-label>
            <mat-select formControlName="city_id" required>
              <mat-option *ngFor="let city of cities | keyvalue" [value]="city.key">
                {{ city.value }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form_person.controls['city_id'].invalid">Cuidad Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Seleccione un departamento</mat-label>
            <mat-select formControlName="department_position_id" required>
              <mat-option *ngFor="let position of positions | keyvalue" [value]="position.key">
                {{ position.key }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form_person.controls['department_position_id'].invalid">Departamento Requerido</mat-error>
          </mat-form-field>

          <mat-form-field class="col-md-6">
            <mat-label>Seleccione una oficina / local</mat-label>
            <mat-select formControlName="location_id" required>
              <mat-option *ngFor="let location of locations | keyvalue" [value]="location.key">
                {{ location.value }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form_person.controls['location_id'].invalid">Departamento Requerido</mat-error>
          </mat-form-field>

          <div class="form-group col-12">
            <label for="foto">Foto</label>
            <input
              #photoUserInput
              id="foto"
              accept=".png,.jpeg,.jpg"
              (change)="uploadImg($event)"
              class="form-control-file"
              type="file"
              name="" />
          </div>
          <div class="col-md-3 col-6 mb-3">
            <ng-container *ngIf="photo">
              <button mat-mini-fab class="position-absolute m-1" (click)="clearPhoto()">
                <i class="fa-solid fa-xmark"></i>
              </button>
              <img class="w-100" [src]="photo" alt="imagen de usuario" />
            </ng-container>
          </div>
        </div>
        <div>
          <button
            color="primary"
            mat-raised-button
            [disabled]="isloadperson"
            type="button"
            (click)="saveInServerPerson()">
            Guardar
          </button>
          <button
            color="accent"
            *ngIf="state === 'edit'"
            [disabled]="isloadperson"
            mat-raised-button
            color="accent"
            (click)="goInfo()"
            type="button">
            Gestionar datos de la persona
          </button>
        </div>
      </form>
    <!-- </mat-step> -->
    <!-- <mat-step [editable]="false">
      <ng-template matStepLabel>Datos de persona</ng-template>
      <form [formGroup]="form_data_person" (ngSubmit)="saveInServerInfo()">
        <div class="col-12">
          <h2 class="m-0">Información de contacto {{ person.first_name }} {{ person.last_name }}</h2>
          <mat-chip-set *ngIf="stateInfoAndContact === 'edit'">
            <mat-chip class="bg-blue parpadeo text-white" [removable]="true" (removed)="asCreateInfo()">
              Editando #{{ itemCurrentForEdit?.id }}
              <mat-icon matChipRemove>cancel</mat-icon>
            </mat-chip>
          </mat-chip-set>
        </div>
        <mat-form-field class="col-md-6">
          <mat-label>Seleccione un Tipo de dato</mat-label>
          <mat-select formControlName="type" required>
            <mat-option *ngFor="let type of types | keyvalue" [value]="type.key">
              {{ type.value }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="form_data_person.controls['type'].invalid">Tipo Requerido</mat-error>
        </mat-form-field>
        <mat-form-field class="col-md-12">
          <mat-label>Información</mat-label>
          <textarea matInput formControlName="value" type="text" required></textarea>
          <mat-error *ngIf="form_data_person.controls['value'].invalid">Valor Requerido</mat-error>
        </mat-form-field>

        <div class="my-3">
          <button color="primary" mat-raised-button [disabled]="isloadContact" type="submit">Guardar</button>
        </div>
      </form>
      <mat-card>
        <table style="background: inherit; color: inherit" class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Tipo</th>
              <th>Info</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of infoAndContact">
              <td>{{ item.id }}</td>
              <td>{{ item.type }}</td>
              <td>{{ item.value }}</td>
              <td>
                <button mat-mini-fab (click)="editItemCurrent(item.id)">
                  <i class="fa-solid fa-pen"></i>
                </button>
                <button mat-mini-fab color="accent" color="warn" (click)="deleteItem(item.id)">
                  <i class="fa-regular fa-trash-can"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </mat-card>
    </mat-step>
  </mat-horizontal-stepper> -->
</div>
