<div>
  <app-search-template
    placeholder="Buscador de reportes"
    [customLoader]="true"
    [customTemplate]="true"
    (data)="getData($event)"
    (_isLoading)="hasLoading($event)"
    [url$]="url"
    [title]="'Reportes'">
    <ng-container menuBar>
      <mat-chip [routerLink]="['./create']" class="ml-1 bg-stack-overflow text-white"><mat-icon>add</mat-icon>Reporte</mat-chip>
    </ng-container>

    <div customTemplate class="position-relative">
      <div *ngIf="isLoading" class="is-loading center w-100 h-100">
        <div class="center">
          <mat-spinner [diameter]="25"></mat-spinner>
          <p class="m-0 ml-2">Cargando datos</p>
        </div>
      </div>
      <div  class="position-relative table-container shadow">
        <table
          style="width: max-content !important"
          mat-table
          [dataSource]="dataSource"
          multiTemplateDataRows
          class="mat-elevation-z8"
          matSort
          matSortActive="created_at"
          matSortDisableClear
          matSortDirection="desc"
          (matSortChange)="changeSort($event)">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>#</th>
            <td mat-cell *matCellDef="let element">{{ element.id }}</td>
          </ng-container>
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Nombre</th>
            <td mat-cell *matCellDef="let element">
              {{ element.name }}
            </td>
          </ng-container>
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Titulo</th>
            <td mat-cell *matCellDef="let element">
              {{ element.title }}
            </td>
          </ng-container>
          <!-- <ng-container matColumnDef="file_path">
            <th mat-header-cell *matHeaderCellDef>Ruta</th>
            <td mat-cell *matCellDef="let element">
              {{ element?.file_path }}
            </td>
          </ng-container> -->
          <!-- <ng-container matColumnDef="disk">
            <th mat-header-cell *matHeaderCellDef>Disco</th>
            <td mat-cell *matCellDef="let element">
              {{ element?.disk }}
            </td>
          </ng-container> -->
          <ng-container matColumnDef="created_at">
            <th mat-header-cell *matHeaderCellDef>Creado</th>
            <td mat-cell *matCellDef="let element">
              {{ element.created_at | date: 'medium' }}
            </td>
          </ng-container>
          <ng-container matColumnDef="ext">
            <th mat-header-cell *matHeaderCellDef>Extension</th>
            <td mat-cell *matCellDef="let element">
              {{ element?.ext }}
            </td>
          </ng-container>
          <ng-container matColumnDef="permalink">
            <th mat-header-cell *matHeaderCellDef>Link</th>
            <td mat-cell *matCellDef="let element">
              <a [href]="element?.permalink" download>descarga</a>
            </td>
          </ng-container>
          <ng-container matColumnDef="actions" stickyEnd>
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let element">
              <div>
                <!-- <button
                  mat-icon-button
                  *ngxPermissionsOnly="permissions.index"
                  color="primary"
                  class="mr-1"
                  (click)="editReport(element.id)">
                  <mat-icon>visibility</mat-icon>
                </button> -->
                <!-- <a
                  mat-icon-button
                  *ngxPermissionsOnly="permissions.edit"
                  color="accent"
                  [routerLink]="['/system-orders/reports', element.id, 'edit']">
                  <mat-icon>edit</mat-icon>
                </a> -->
                <button
                  mat-icon-button
                  *ngxPermissionsOnly="permissions.destroy"
                  color="warn"
                  (click)="deleteReport(element.id)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
          <tr mat-row *matRowDef="let element; columns: columnsToDisplay"></tr>
        </table>
      </div>
    </div>
  </app-search-template>
</div>
