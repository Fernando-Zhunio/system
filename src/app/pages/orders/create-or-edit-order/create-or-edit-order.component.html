<div>
    <h2 class="font-4xl font-weight-bold mt-2 m-0">{{title}}</h2>
    <div class="mt-3 pb-3">
        <mat-card>
            <!-- <div class="row card-body">
                <form [formGroup]="form" class="col-md-6">
                    <mat-form-field class="w-100">
                        <input matInput  placeholder="Tipo de orden" required>
                        <mat-error *ngIf="">Este campo es requerido</mat-error>
                    </mat-form-field>

                    <mat-form-field class="w-100">
                        <mat-select formControlName="type" placeholder="Tipo de orden">
                            <mat-option *ngFor="let type of typesOrders" [value]="type">
                                {{type | translatefz: 'orders'}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="w-100">
                        <mat-card class="position-relative overflow-hidden">
                            <div>
                                <div *ngIf="!client" class="not-client">
                                    <div>
                                        <h4 class="font-weight-bold">Seleccione un cliente o cree uno nuevo</h4>
                                        <button mat-raised-button>Seleccionar o crear cliente</button>
                                    </div>
                                </div>
                                <div>
                                    <div><span>Nombres: &nbsp;</span>{{client?.first_name}}</div>
                                    <div><span>Tipo de documento: &nbsp;</span>{{client?.doc_type}}</div>
                                    <div><span>Numero de documento: &nbsp;</span>{{client?.doc_id}}</div>
                                    <div><span>Correo electrónico: &nbsp;</span>{{client?.email}}</div>
                                    <div><span>Teléfono: &nbsp;</span>{{client?.phone}}</div>
                                    <div><span>Cuidad: &nbsp;</span>{{client?.city}}</div>
                                    <div><span>Estado: &nbsp;</span>{{client?.state}}</div>
                                    <div><span>País: &nbsp;</span>{{client?.country}}</div>
                                </div>
                            </div>
                        </mat-card>
                    </div>
                </form>
                <div class="col-md-6 center">
                    <img src="assets/img/order.svg" alt="imagen de orden" class="w-75">
                </div>
            </div> -->
            <mat-horizontal-stepper (selectionChange)="changeStepper($event)" linear #stepper>
                <mat-step label="client" [stepControl]="form.get('client_id')" [editable]="true">
                    <div>
                        <ng-template matStepLabel>Asignar Cliente</ng-template>
                        <div>
                            <app-search placeholder="Buscador de clientes" (data)="getData($event)"
                                [url]="clientOrders.url">
                                <span moreTitle inputBtn>
                                    <button [routerLink]="['../clients/create']" mat-raised-button color="accent">Crear
                                        cliente <mat-icon>person_add_alt_1</mat-icon></button>
                                </span>
                                <ng-container data>
                                    <div class="card-columns">
                                        <ng-container *ngFor="let client of clientOrders.data|keyvalue">
                                            <app-client [client]="client.value">
                                                <button btn class="mt-2" (click)="selectedClient(client.key)"
                                                    [disabled]="clientOrders.data.has(clientSelected?.id)"
                                                    color="accent" mat-raised-button>Seleccionar este cliente</button>
                                            </app-client>
                                        </ng-container>
                                    </div>
                                </ng-container>
                            </app-search>
                        </div>
                        <div *ngIf="clientSelected">
                            <mat-chip-list>
                                <mat-chip removable="true" (removed)="removeClientSelected()"><span
                                        class="text-success">Cliente seleccionado:</span>&nbsp;
                                    {{clientSelected.first_name}} {{clientSelected.last_name}} -
                                    {{clientSelected.doc_id}}
                                    <mat-icon matChipRemove>cancel</mat-icon>
                                </mat-chip>
                            </mat-chip-list>
                        </div>
                        <div>
                            <div class="text-danger" *ngIf="form.get('client_id').invalid">Este paso requiere que busque
                                y seleccione un cliente para poder continuar</div>
                            <button class="my-2" color="primary" [disabled]="form.get('client_id').invalid"
                                mat-raised-button matStepperNext>Siguiente</button>
                        </div>
                    </div>
                </mat-step>

                <mat-step label="address" [stepControl]="form.get('address_id')" [editable]="true">
                    <div>
                        <ng-template matStepLabel>Asignar Dirección</ng-template>
                        <div *ngIf="form.get('client_id').valid">
                            <div>{{clientOrders.client.first_name }} {{clientOrders.client.last_name }} - {{clientOrders.client.doc_id }}</div>
                            <div><button mat-raised-button>Crear dirección para este cliente</button></div>
                            <div *ngIf="!clientOrders.isLoadingAddresses && clientOrders.addressesClientOrder.length > 0;">
                                <mat-card *ngFor="let address of clientOrders.addressesClientOrder">
                                    <div>{{address.first_name }} {{address.last_name}}</div>
                                    <div><span>Calle:</span> {{address.street}}</div>
                                    <div *ngIf="address?.number"><span>Numero:</span> {{address.number}}</div>
                                    <div *ngIf="address?.neighborhood"><span>Vecindario:</span> {{address.neighborhood}}</div>
                                    <div><span>Ciudad:</span> {{address.city}}</div>
                                    <div><span>Estado:</span> {{address.state}}</div>
                                    <div *ngIf="address?.zip_code"><span>Código postal:</span> {{address.zip_code}}</div>
                                </mat-card>
                            </div>
                            <div *ngIf="clientOrders.isLoadingAddresses">
                                <mat-spinner></mat-spinner>
                                Cargando direcciones...
                            </div>
                            <div *ngIf="!clientOrders.isLoadingAddresses && clientOrders.addressesClientOrder.length < 1">
                                No hay direcciones asignadas al cliente
                            </div>

                        </div>
                        <div>
                            <button mat-button matStepperPrevious>Back</button>
                            <button mat-button matStepperNext>Next</button>
                        </div>
                    </div>
                    <div>
                        <div class="text-danger" *ngIf="form.get('client_id').invalid">Este paso requiere que busque y
                            seleccione una dirección para poder continuar</div>
                        <button class="my-2" color="primary" [disabled]="form.get('client_id').invalid"
                            mat-raised-button matStepperNext>Siguiente</button>
                    </div>
                </mat-step>

                <mat-step>
                    <ng-template matStepLabel>Done</ng-template>
                    <p>You are now done.</p>
                    <div>
                        <button mat-button matStepperPrevious>Back</button>
                        <button mat-button (click)="stepper.reset()">Reset</button>
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </mat-card>
    </div>
</div>