<app-search-template
  [title]="'Campa침as'"
  (data)="getData($event)"
  placeholder="Buscador de campa침as"
  [url$]="'catalogs/campaigns'">
  <ng-container menuBar>
    <mat-chip-list>
      <mat-chip [routerLink]="['./create']" routerLinkActive="router-link-active" class="mat-orange ml-2">
        <mat-icon>add</mat-icon>
        Campa침a
      </mat-chip>
    </mat-chip-list>
  </ng-container>

  <ng-container data>
    <mat-card class="card border-0" *ngFor="let campaign of data | keyvalue">
      <mat-card-header>
        <mat-card-title>{{ campaign.value.title }}</mat-card-title>
        <mat-card-subtitle>{{ campaign.value.created_at | date: "medium" }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>{{ campaign.value.description }}</p>
        <mat-chip-list>
          <mat-chip>Duraci칩n: {{ campaign.value.duration_type | translatefz }}</mat-chip>
          <mat-chip>Estado: {{ campaign.value.status | translatefz }}</mat-chip>
        </mat-chip-list>
        <ng-container *ngIf="campaign.value.duration_type == 'date_range'">
          <small>Inicio y Fin</small>
          <mat-chip-list>
            <mat-chip>Inicio {{ campaign.value.start_date | date:'medium'}}</mat-chip>
            <mat-chip>Fin {{ campaign.value.end_date | date:'medium' }}</mat-chip>
          </mat-chip-list>
        </ng-container>
        <div class="my-2">
          <button [routerLink]="['./', campaign.key, 'edit']" mat-icon-button color="primary">
            <mat-icon>edit</mat-icon>
          </button>
          <button (click)="deleteData(campaign.key)" mat-icon-button color="warn">
            <mat-icon>delete</mat-icon>
          </button>
          <button [routerLink]="['./', campaign.key, 'promotions']" mat-raised-button color="accent">
            <mat-icon>visibility</mat-icon>
            Promociones
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </ng-container>
</app-search-template>
