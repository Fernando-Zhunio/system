 <!-- <div>
    <app-header-search [filter_data]="{state:filter_state}" [placeholder]="'Escribe la publicación a buscar'" (isLoading)="isLoading = $event" [url]="'catalogs/publications'" (products)="loadData($event)">
        <mat-chip-list class="ml-1">
            <mat-chip [matMenuTriggerFor]="menu" class="text-truncate">
                <mat-icon class="text-black-50">filter_alt</mat-icon>
            </mat-chip>
            <mat-chip *ngxPermissionsOnly="permission_page.create"  (click)="goNewPublication()">
                <mat-icon class="text-black-50" >add</mat-icon>
            </mat-chip>
        </mat-chip-list>
        <mat-menu #menu="matMenu" [overlapTrigger]="false">
            <div mat-menu-item [disableRipple]="true" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()" class="h-100">
                <mat-form-field class="w-100">
                    <mat-label>Estado</mat-label>
                    <mat-select type="text" #select_warehouse [(ngModel)]="filter_state">
                        <mat-option value="0">Todos</mat-option>
                        <mat-option *ngFor="let state of states" [value]="state.slug">
                            {{ state.name }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div mat-menu-item [disableRipple]="true" class="h-100">
                <button mat-raised-button (click)="applyFilter()">Aplicar filtros</button>
            </div>
        </mat-menu>

    </app-header-search>

    <div *ngIf="isLoading" class="card-columns">
        <div *ngFor="let item of [1, 2, 3]" class="my-1 card rounded-fz card-body border-0">
          <ngx-skeleton-loader count="1" [theme]="{
              'border-radius': '5px',
              height: '50px'
            }"></ngx-skeleton-loader>
          <ngx-skeleton-loader count="1" [theme]="{
              'border-radius': '5px',
              height: '30px'
            }"></ngx-skeleton-loader>
          <ngx-skeleton-loader count="3" [theme]="{
              'border-radius': '5px',
              height: '40px',
              width: '150px',
              'margin-right': '5px'
            }"></ngx-skeleton-loader>
        </div>
      </div>
    <div *ngIf="!isLoading" class="card-columns">
        <ng-container  *ngFor="let p of products;trackBy:publicationFor">
            <app-publication [permission_page]="permission_page"  [publication]="p" (delete)="destroyPublication($event)"></app-publication>
        </ng-container>
    </div>
    <ng-container *ngIf="!isLoading && products.length < 1">
        <div class="row">
            <div class="col-md-6">
                <img src="/assets/img/respuesta_vacia.svg" alt="" width="100%">
            </div>
            <div class="col-md-6 font-2xl d-flex align-items-center">
                Ups! Lo que Buscaste no lo encontramos mejorar el criterio de Búsqueda
            </div>
        </div>
    </ng-container>
    <mat-paginator *ngIf="products.length > 0" [pageSizeOptions]="[10, 20, 30]" (page)="changePaginator($event)" showFirstLastButtons [pageSize]="paginator.per_page" [length]="paginator.total" [pageIndex]="paginator.current_page-1">
    </mat-paginator>
</div> -->

<div>
  <app-search-template [title]="'Publicaciones'" [active_filters_menu]="true" [filter_data]="{state:filter_state}" [columns]="2" placeholder="Buscar publicación " [url$]="'catalogs/publications'" (data)="loadData($event)">
    <ng-container  data>
      <ng-container *ngFor="let p of products">
        <div class="card border-0">
          <app-publication  [permission_page]="permission_page"  [publication]="p" (delete)="destroyPublication($event)"></app-publication>
        </div>
      </ng-container>
  </ng-container>
  <ng-container filterMenu>
    <div mat-menu-item [disableRipple]="true" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()" class="h-100">
      <mat-form-field class="w-100">
          <mat-label>Estado</mat-label>
          <mat-select type="text" #select_warehouse [(ngModel)]="filter_state">
              <mat-option value="">Todos</mat-option>
              <mat-option *ngFor="let state of states" [value]="state.slug">
                  {{ state.name }}</mat-option>
          </mat-select>
      </mat-form-field>
  </div>
  </ng-container>
  <ng-container menuBar>
    <mat-chip class="ml-1 bg-stack-overflow text-white" *ngxPermissionsOnly="permission_page.create"  (click)="goNewPublication()">
      <mat-icon>post_add</mat-icon> Nueva publicación
  </mat-chip>
  </ng-container>
  </app-search-template>
</div>
