<div>
  <h1>{{ title }}</h1>
  <div class="row">
    <div class="col-md-6">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Formulario de usuario</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="form">
            <mat-form-field class="col-12">
              <!-- <input matInput placeholder="Correo electrónico"  /> -->
              <mat-select placeholder="Correo electrónico" formControlName="email">
                <mat-option *ngFor="let contact of personCurrent?.contact_info" [value]="contact.value">
                  {{ contact.value }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field class="col-12">
              <input matInput placeholder="Contraseña" formControlName="password" />
            </mat-form-field>
          </form>
          <div class="mat-form-padding">
            <span>Roles:</span>
            <span class="example-list-section">
              <ul class="row">
                <li class="col-md-6" *ngFor="let rol of roles">
                  <mat-checkbox [(ngModel)]="rol.checked">
                    {{ rol.name }}
                  </mat-checkbox>
                </li>
              </ul>
            </span>
          </div>
          <button mat-raised-button color="primary" (click)="saveInServer()">Guardar</button>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-md-6">
      <mat-card class="position-relative h-100 overflow-hidden">
        <div>
          <div>
            <div class="d-flex justify-content-between align-items-center w-100">
              <span class="font-2xl">Persona</span>
              <button color="accent" (click)="isSearchPerson = true" mat-icon-button><mat-icon>search</mat-icon></button>
            </div>
          </div>
          <!-- <mat-card-subtitle>Subtitle</mat-card-subtitle> -->
        </div>
        <div *ngIf="personCurrent">
          <div  class="d-flex">
            <img class="img-person" [src]="personCurrent?.photo?.permalink" />
            <div>
              <h3>{{ personCurrent.first_name + " " + personCurrent.last_name }}</h3>
            </div>
          </div>
          <mat-card-content class="m-0">
            <p>CI / Passport :{{ personCurrent.identification_number }}</p>
            <p>Cargo: {{ personCurrent.position?.name }}</p>
            <p>Ciudad: {{personCurrent?.city?.name}}</p>
            <p>Estado: {{personCurrent?.status}}</p>
            <p>Sexo: {{personCurrent?.sex}}</p>
            <p>Sexo: {{personCurrent?.created_at | date:'medium'}}</p>
          </mat-card-content>
        </div>
        <div [ngClass]="{ 'show-search-person': isSearchPerson }" class="main-style p-2 search-person-content">
          <app-search (data)="getPeople($event)" placeholder="Buscador de personas" [url]="'admin/user/people'">
            <div class="px-3" data style="height: calc(100% - 108px); overflow: auto">
              <mat-card class="my-2" *ngFor="let person of people">
                <div>
                  <div class="d-flex">
                    <img class="img-person" [src]="person?.photo?.permalink" />
                    <h3>{{ person.first_name + " " + person.last_name }}</h3>
                  </div>
                </div>
                <mat-card-content class="m-0">
                  <p>CI / Passport :{{ person.identification_number }}</p>
                  <p>Cargo: {{ person.position?.name }}</p>
                </mat-card-content>
                <mat-card-actions align="start">
                  <button mat-button color="primary" (click)="selectedPerson(person.id)">
                    <mat-icon>done</mat-icon>
                    Seleccionar
                  </button>
                </mat-card-actions>
              </mat-card>
            </div>
            <ng-container inputBtn>
              <button (click)="isSearchPerson = false" class="btn-default" ><i class="fas fa-times"></i></button>
            </ng-container>
          </app-search>
        </div>
      </mat-card>
    </div>
  </div>
</div>
